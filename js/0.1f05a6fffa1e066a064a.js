webpackJsonp([0],{"2NXm":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("B60x"),i=t.n(o),r=t("gRE1"),a=t.n(r),s=t("fZjL"),c=t.n(s),l=t("bXuR"),u=t.n(l),f={name:"Plot",data:function(){return{counter:-1,minX:-100}},props:{symbol:{type:String,required:!0}},mounted:function(){var e=new WebSocket("ws://localhost:9000/ws/gaps");setTimeout(function(){vegaEmbed("#"+this.symbol,u.a).then(function(n){var t=this.newGenerator().bind(this);console.log("receiving stream for symbol="+this.symbol),e.send(this.symbol),e.onmessage=function(e){var o=this,i=JSON.parse(e.data);i=i.filter(function(e){return e.baseCurrency+e.counterCurrency===o.symbol}),this.minX+=c()(i).length,console.log(i),console.log("minX= "+this.minX),console.log("counter= "+this.counter);var r=vega.changeset().insert(t(i)).remove(function(e){return e.counter<this.minX}.bind(this));n.view.change("gapsData",r).run()}.bind(this)}.bind(this))}.bind(this),1e3)},methods:{newGenerator:function(){return function(e){var n=this;return e.map(function(e){var t=a()(e.gapLevels),o=e.baseCurrency+e.counterCurrency,i="BitFinex"===e.higherPriceExchange?-1:1;n.counter++;for(var r={symbol:o,counter:n.counter},s=0;s<t.length;s++)r["gapValue"+s]=t[t.length-1-s].gapPercent*i,r["gapVolume"+s]=t[t.length-1-s].volume;return r})}}}},d=function(){var e=this.$createElement,n=this._self._c||e;return n("div",[this._v("\n\t"+this._s(this.symbol)+"\n  "),n("div",{attrs:{id:this.symbol}})])},p=[];d._withStripped=!0;var h=t("XyMi"),m=!1;var v=function(e){m||t("zOb8")},g=Object(h.a)(f,d,p,!1,v,null,null);g.options.__file="src/components/plot/plot.vue";var b={name:"PageIndex",components:{Plot:g.exports},data:function(){return{symbols:[]}},mounted:function(){console.log("mounted"),i.a.load("https://cdn.jsdelivr.net/npm/vega@3.2.1").then(function(){i.a.load("https://cdn.jsdelivr.net/npm/vega-lite@2.3.1").then(function(){i.a.load("https://cdn.jsdelivr.net/npm/vega-embed@3.2.0").then(function(){console.log("scripts loaded")})})}),new WebSocket("ws://localhost:9000/ws/symbols").onmessage=function(e){var n=e.data;console.log("opening stream for symbol="+n+"..."),this.symbols.push(n)}.bind(this)}},y=function(){var e=this.$createElement,n=this._self._c||e;return n("q-page",{staticClass:"flex"},this._l(this.symbols,function(e){return n("div",[n("plot",{attrs:{symbol:e}})],1)}))},j=[];y._withStripped=!0;var x=!1;var O=function(e){x||t("XaQj")},_=Object(h.a)(b,y,j,!1,O,null,null);_.options.__file="src/pages/index.vue";n.default=_.exports},B60x:function(e,n,t){
/*!
  * vue-script2 v2.0.1
  * (c) 2016-2017 Greg Slepak
  * @license MIT License
  */var o;o=function(){"use strict";var e={installed:!1,p:Promise.resolve(),version:"2.0.1",loaded:{},install:function(t){arguments.length<=1||void 0===arguments[1]||arguments[1];if(!e.installed){var o=["unload"].concat(["src","type","async","integrity","text","crossorigin"]);t.component("script2",{props:o,template:'<div style="display:none"><slot></slot></div>',mounted:function(){var t=this,i=this.$el.parentElement;if(this.src){var r=n.omitBy(n.pick(this,o),n.isUndefined);r.parent=i;var a=function(){return e.load(t.src,r)};n.isUndefined(this.async)?e.p=e.p.then(a):a()}else e.p=e.p.then(function(){var e=document.createElement("script");e.type="text/javascript",e.appendChild(document.createTextNode(t.$el.innerHTML)),i.appendChild(e)});this.$nextTick(function(){t.$el.remove()})},destroyed:function(){this.unload&&(new Function(this.unload)(),delete e.loaded[this.src])}}),e.installed=!0}},load:function(t){var o=arguments.length<=1||void 0===arguments[1]?{parent:document.head}:arguments[1];return e.loaded[t]?Promise.resolve(t):new Promise(function(i,r){var a=document.createElement("script");n.defaults2(a,n.omit(o,["unload","parent"]),{type:"text/javascript"}),a.async=!1,a.src=t,o.crossorigin&&(a.crossOrigin=o.crossorigin),a.onload=function(){e.loaded[t]=1,i(t)},a.onerror=function(){return r(new Error(t))},o.parent.appendChild(a)})}},n={isUndefined:function(e){return void 0===e},pick:function(e,n){var t={};return n.forEach(function(n){return t[n]=e[n]}),t},omit:function(e,n){var t={};return Object.keys(e).forEach(function(o){-1===n.indexOf(o)&&(t[o]=e[o])}),t},omitBy:function(e,n){var t={};return Object.keys(e).forEach(function(o){n(e[o])||(t[o]=e[o])}),t},defaults2:function(e){for(var t=arguments.length,o=Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];o.forEach(function(t){Object.keys(t).forEach(function(o){(n.isUndefined(e[o])||""===e[o])&&(e[o]=t[o])})})}};return e},e.exports=o()},Cdx3:function(e,n,t){var o=t("sB3e"),i=t("lktj");t("uqUo")("keys",function(){return function(e){return i(o(e))}})},R7TG:function(e,n,t){(e.exports=t("FZ+f")(!1)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n",""])},TmV0:function(e,n,t){t("fZOM"),e.exports=t("FeBl").Object.values},XaQj:function(e,n,t){var o=t("R7TG");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,t("rjj0").default)("66016b96",o,!1,{})},bXuR:function(e,n){e.exports={$schema:"https://vega.github.io/schema/vega-lite/v2.json",data:{name:"gapsData"},layer:[{mark:"bar",encoding:{x:{field:"counter",type:"ordinal"},y:{field:"gapValue0",type:"quantitative",scale:{domain:[-.01,.01]}},color:{field:"gapVolume0",type:"quantitative",scale:{type:"sqrt",domain:[0,1,10],range:["#ff7f0e","#e7ba52","#17becf"]}}}},{mark:"bar",encoding:{x:{field:"counter",type:"ordinal"},y:{field:"gapValue1",type:"quantitative",scale:{domain:[-.01,.01]}},color:{field:"gapVolume1",type:"quantitative",scale:{type:"sqrt",domain:[0,1,10],range:["#ff7f0e","#e7ba52","#17becf"]}}}},{mark:"bar",encoding:{x:{field:"counter",type:"ordinal"},y:{field:"gapValue2",type:"quantitative",scale:{domain:[-.01,.01]}},color:{field:"gapVolume2",type:"quantitative",scale:{type:"sqrt",domain:[0,1,10],range:["#ff7f0e","#e7ba52","#17becf"]}}}}],width:350,height:200}},fZOM:function(e,n,t){var o=t("kM2E"),i=t("mbce")(!1);o(o.S,"Object",{values:function(e){return i(e)}})},fZjL:function(e,n,t){e.exports={default:t("jFbC"),__esModule:!0}},gRE1:function(e,n,t){e.exports={default:t("TmV0"),__esModule:!0}},jFbC:function(e,n,t){t("Cdx3"),e.exports=t("FeBl").Object.keys},jsO2:function(e,n,t){(e.exports=t("FZ+f")(!1)).push([e.i,"\n.vega-actions a {\n  display: none;\n}\n",""])},mbce:function(e,n,t){var o=t("lktj"),i=t("TcQ7"),r=t("NpIQ").f;e.exports=function(e){return function(n){for(var t,a=i(n),s=o(a),c=s.length,l=0,u=[];c>l;)r.call(a,t=s[l++])&&u.push(e?[t,a[t]]:a[t]);return u}}},uqUo:function(e,n,t){var o=t("kM2E"),i=t("FeBl"),r=t("S82l");e.exports=function(e,n){var t=(i.Object||{})[e]||Object[e],a={};a[e]=n(t),o(o.S+o.F*r(function(){t(1)}),"Object",a)}},zOb8:function(e,n,t){var o=t("jsO2");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,t("rjj0").default)("681fc0b6",o,!1,{})}});